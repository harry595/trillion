<!--base html-->
{% load static %}
<!DOCTYPE html>
  <html lang="en">
  <head>

    <meta charset="UTF-8" />
    <title>Trillion Guard</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="Mark Otto, Jacob Thornton, and Bootstrap contributors">
    <meta name="generator" content="Jekyll v4.1.1">
    <!-- Bootstrap CDN (CSS, JS) -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script>
    <!-- jQuery setting -->
    <script src="https://code.jquery.com/jquery-1.12.4.js"></script>
    <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>  
    <script src="http://code.jquery.com/ui/1.8.18/jquery-ui.min.js"></script>
    <script src="http://code.jquery.com/jquery-latest.js"></script> 
    <link rel="stylesheet" href="https://code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">  
    <!-- fusion charts -->
    <!-- <script type="text/javascript" src="https://cdn.fusioncharts.com/fusioncharts/latest/fusioncharts.js"></script>
    <script type="text/javascript" src="https://cdn.fusioncharts.com/fusioncharts/latest/themes/fusioncharts.theme.fusion.js"></script> -->
    <script type="text/javascript" src="{% static "fusioncharts/fusioncharts.js" %}"></script>
    <script type="text/javascript" src="{% static "fusioncharts/fusioncharts.charts.js" %}"></script>
    <script type="text/javascript" src="{% static "fusioncharts/themes/fusioncharts.theme.fusion.js" %}"></script>
    <!-- Search 시에 돋보기 icon -->
    <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet">

    <!-- Bootstrap core CSS -->
    <link rel="canonical" href="https://getbootstrap.com/docs/4.5/examples/starter-template/">

    <style>
      .bd-placeholder-img {
        font-size: 1.125rem;
        text-anchor: middle;
        -webkit-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        user-select: none;
      }
      @media (min-width: 768px) {
        .bd-placeholder-img-lg {
          font-size: 3.5rem;
        }
      }
    </style>

    <link rel="stylesheet" type="text/css" href="/static/css/calendar.css">
    <!-- Real Rank -->
    <link rel="stylesheet" type="text/css" href="/static/css/realRank.css">
    <script type="text/javascript" src="/static/js/realRank.js"></script>

  </head>
  <body>

    <nav class="navbar navbar-expand-md navbar-dark bg-dark fixed-top">
      <!-- LOGO click시에 index page -->
      <a class="navbar-brand" href="/">TRILLION</a>
      <!-- Page 축소 시 toggler button -->
      <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarsExampleDefault" aria-controls="navbarsExampleDefault" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
      <!-- MENU BAR -->
      <div class="collapse navbar-collapse" id="navbarsExampleDefault">
        <ul class="navbar-nav mr-auto">
          <li class="nav-item active">
            <a class="nav-link" href="/">HOME</a>
          </li>
          <li class="nav-item active">
            <a class="nav-link" href="/board">URL LIST</a>
          </li>
          <li class="nav-item active">
            <a class="nav-link" href="/chart">CHART</a>
          </li>
          <li class="nav-item active">
            <a class="nav-link" href="/shareInfo">SHARE INFO</a>
          </li>
          <li class="nav-item active">
            <a class="nav-link" href="/contact">CONTACT</a>
        </li>
          
        </ul>
        <ul class="my-2 my-lg-0" style="margin-right: 5%;">
          <li class="nav-item dropdown active">
            <a class="nav-link dropdown-toggle" style="color:white;" href="#" id="dropdown01" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">실시간 검색 URL</a>
            <div class="dropdown-menu" style="height: 40px; padding:0;" aria-labelledby="dropdown01">
              <div id="rank_contain">
                  <div id="rank_box">  
                  {% for lis in urllist %}
                    <p>{{lis}} </p>
                  {% endfor %}
                  </div>
              </div>
            </div>
          </li>
          <ul class="navbar-nav mr-auto" style="margin-left: 1">
            {% if user.is_authenticated %}
            <li class="nav-item active">
              <a class="nav-link" href="/logout">SIGN OUT</a>
            </li>
            {% else %}  
            <li class="nav-item active">
              <a class="nav-link" href="/register">SIGN UP</a>
            </li>
            <li class="nav-item active">
              <a class="nav-link" href="/login">SIGN IN</a>
            </li>
          </ul>
          {% endif %}
        </ul>
 
      </div>
    </nav>
<!-- css 추가 -->
<link rel="stylesheet" type="text/css" href="/static/css/index.css" />

<script type="text/javascript">
  $(document).ready(function () {
    $("#btn").click(function () {
      checkHttp();
    });
  });
  function checkHttp() {
    if ($.trim($("#search").val()) == "") {
      window.alert("URL을 입력해주세요.");
      return;
    }
    if ($.trim($("#search").val()).indexOf("http://") == -1 && $.trim($("#search").val()).indexOf("https://") == -1) {
      window.alert("http:// 혹은 https://를 붙여주세요.");
      return;
    }
    submitForm();
  }

  function submitForm() {
      $.ajax({
        url: "/append",
        data: { url_catch: $("#search").val() },
        success: function (data) {
          $("body").append(data);
          init();
        },
        beforeSend: function () {
          $("#result").remove();
          $("#wrap-loading").show();
        },
        complete: function () {
          $("#wrap-loading").hide();
        },
      });
    }

    function init() {
      $("#searchDiv input").each(function () {
        $(this).attr("value", "");
      });
    }
  </script>

  <!-- Trillion Logo -->
  <div class="body-logo">
    <img id="logo" src="/static/image/logo_.png" />
  </div>

  <div class="box">
    <div id="searchDiv" class="body-search">
      <input
        type="text"
        id="search"
        placeholder="URL을 입력하세요. (http://)"
        onkeypress="if( event.keyCode==13 ){checkHttp();}"
      />
      <button id="btn" class="icon">
        <i class="fa fa-search"></i>
      </button>
    </div>
  </div>

  <div id="wrap-loading" style="z-index: 10000; display: none; margin-left: 42%;">
    <h1 style="display: inline; " >Loading...</h1>
    <img src="/static/image/loading.gif" alt="Loading..." />
  </div>

  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>


  </body>

</html>
